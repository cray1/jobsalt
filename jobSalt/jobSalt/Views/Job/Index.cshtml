@{
    ViewBag.Title = "Home Page";
}
    
<script type="text/javascript">

    var page = 1;
    var _inCallback = false;

    function loadProducts() {
        if (page > -1 && !_inCallback) {
            
            _inCallback = true;
            $('div#loading').html('<p><img src="/Content/Images/loading.gif"></p>');
            
            $.get("/Job/Index/?page=" + page, function (data) {
                if (data != '') {
                    $("#productList").append(data);
                }
                else {
                    alert("Bad Data");
                    page = -1;
                }

                _inCallback = false;
                $('div#loading').empty();
            });
            page++;
        }
    }

    loadProducts();

    var dcList = true;

    $(window).scroll(function () {
        if ($(window).scrollTop() == $(document).height() - $(window).height()) {

            loadProducts();
        }
    });
</script>

 <div class="container">
    <div class="jumbotron">
        <h1>Job Search</h1>
        @using (Html.BeginForm("Index", "Job"))
        {
           @Html.TextBox("query")
           <input type="submit" value="Search" />
        }
    </div>
     <div id="productList"></div>

     <div id="loading"></div> 
</div>
